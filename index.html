<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Science Safety Adventure</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Fredoka+One&family=Inter:wght@400;600&display=swap");

      body {
        font-family: "Inter", sans-serif;
        background: url("Screenshot 2025-08-22 183411.png") no-repeat center
          center fixed;
        background-size: cover;
        color: #222;
        text-align: center;
        margin: 0;
        padding: 10px;
        font-weight: bolder;
        font-size: large;
      }

      #loadingScreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: #87fba2;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        z-index: 9999;
        animation: popIn 0.8s ease;
      }

      @keyframes popIn {
        0% {
          opacity: 0;
          transform: scale(0.7);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      #loadingRocket {
        width: 15vw;
        max-width: 100px;
        animation: spin 2s linear infinite;
        margin-bottom: 15px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        font-size: 6vw;
        font-weight: bold;
        color: blue;
        animation: bounce 1s infinite;
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-8px);
        }
      }

      h1 {
        color: blue;
        font-family: "Fredoka One", cursive;
        font-size: clamp(3rem, 4vw, 2.5rem);
        letter-spacing: 1.5px;
        margin: 10px 0 30px 0;
        text-shadow: 2px 2px 0 #fff;
      }

      h2 {
        color: blue;
        font-family: "Fredoka One", cursive;
        font-size: clamp(1.5rem, 4vw, 2.5rem);
        letter-spacing: 1px;
        margin-top: 10px;
        text-shadow: 1px 1px 0 #fff;
      }

      .screen {
        display: none;
      }

      .active {
        display: block;
      }

      button {
        font-size: clamp(1rem, 2.5vw, 1.2rem);
        margin: 10px;
        padding: 12px 25px;
        border: none;
        border-radius: 12px;
        background-color: #5170ff;
        color: #fff;
        cursor: pointer;
        transition: transform 0.2s ease;
        width: 90%;
        max-width: 300px;
        font-weight: bold;
      }

      button:hover {
        transform: scale(1.05);
        background-color: #3a5bd9;
      }

      button:disabled {
        background-color: #cccccc;
        cursor: not-allowed;
        transform: none;
      }

      input,
      select {
        font-size: 1rem;
        padding: 10px;
        margin: 8px auto;
        border: 2px solid #ff6600;
        border-radius: 10px;
        background-color: #fff;
        color: #222;
        display: block;
        width: 90%;
        max-width: 300px;
      }

      .fade-in {
        animation: fadeIn 0.5s ease-in;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.9);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .card {
        background: rgb(255, 255, 188);
        border-radius: 20px;
        padding: 20px;
        margin: 20px auto;
        max-width: 490px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        border: 2px solid orange;
      }

      #tableOutput {
        background-color: #fffbe9;
        border-radius: 15px;
        padding: 15px;
        margin-top: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      .scientist-container {
        width: 100%;
        max-width: 220px;
        height: 450px;
        margin: 0 auto;
        position: relative;
      }

      .scientist-box-text {
        top: 170px;
        left: 10px;
        right: 10px;
        bottom: 20px;
        padding: 5px;
        overflow-y: auto;
        text-align: center;
        font-weight: bolder;
        font-size: 18px;
        color: #222;
      }

      .safety-table {
        width: 100%;
        font-size: 18px;
        font-weight: bolder;
        border-collapse: collapse;
      }

      .safety-table td {
        padding: 8px 4px;
        text-align: left;
      }

      .safety-table tr:nth-child(even) {
        background-color: #f7f7c5;
      }

      .menu-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 10px;
        max-width: 800px;
        margin: 0 auto;
      }

      .feedback {
        font-size: 18px;
        margin: 15px 0;
        padding: 10px;
        border-radius: 10px;
        font-weight: bold;
      }

      .correct {
        background-color: #a5d6a7;
        color: #2e7d32;
      }

      .incorrect {
        background-color: #ffab91;
        color: #c62828;
      }

      .scenario-image {
        width: 100%;
        max-width: 300px;
        height: 200px;
        margin: 15px auto;
        border-radius: 10px;
        background-color: #e0e0e0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        color: #666;
        border: 3px solid #ff6600;
      }

      .equipment-item {
        display: flex;
        align-items: center;
        margin: 10px 0;
        padding: 10px;
        background-color: #fff;
        border-radius: 10px;
        border: 2px solid orange;
        cursor: pointer;
      }

      .equipment-icon {
        font-size: 24px;
        margin-right: 15px;
        width: 40px;
        text-align: center;
      }

      /* Chemical Mixing Game Styles */
      .chemical-game {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
      }

      .chemicals-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
      }

      .chemical-item {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: transform 0.3s;
        border: 3px solid #333;
      }

      .chemical-item:hover {
        transform: scale(1.1);
      }

      .mixing-area {
        width: 200px;
        height: 200px;
        border: 3px dashed #ff6600;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        margin: 15px 0;
        background-color: #f9f9f9;
      }

      .reaction-result {
        min-height: 100px;
        padding: 15px;
        border-radius: 10px;
        background-color: #fff;
        margin: 15px 0;
        border: 2px solid #5170ff;
      }

      .reaction-safe {
        background-color: #a5d6a7;
        color: #2e7d32;
      }

      .reaction-danger {
        background-color: #ffab91;
        color: #c62828;
      }

      .reaction-explosion {
        background-color: #ffcc80;
        color: #e65100;
        animation: pulse 0.5s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      .chemical-warning {
        font-weight: bold;
        color: #c62828;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div id="loadingScreen">
      <img
        id="loadingRocket"
        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M50 10 L70 50 L50 70 L30 50 Z' fill='%23FF6600'/%3E%3Ccircle cx='50' cy='30' r='5' fill='%235170FF'/%3E%3C/svg%3E"
        alt="Rocket"
      />
      <div class="loading-text">Preparing Lab...</div>
    </div>

    <h1>Science Safety Adventure</h1>
    <a onclick="window.open('https://math-fun-muhurto.vercel.app', '_blank')">
      üöÄ Open Mega Math Challange
    </a>

    <br /><br /><br />
    <div class="menu-container">
      <button onclick="showScreen('quizScreen')">
        <i class="fas fa-question-circle"></i> Safety Quiz
      </button>
      <button onclick="showScreen('equipmentScreen')">
        <i class="fas fa-microscope"></i> Lab Equipment
      </button>
      <button onclick="showScreen('scenarioScreen')">
        <i class="fas fa-flask"></i> Safety Scenarios
      </button>
      <button onclick="showScreen('rulesScreen')">
        <i class="fas fa-clipboard-list"></i> Safety Rules
      </button>
      <button onclick="showScreen('emergencyScreen')">
        <i class="fas fa-first-aid"></i> Emergency Procedures
      </button>
      <button onclick="showScreen('whsScreen')">
        <i class="fas fa-exclamation-triangle"></i> Hazard Symbols
      </button>
      <button onclick="showScreen('chemicalScreen')">
        <i class="fas fa-vial"></i> Chemical Mixing
      </button>
    </div>

    <div id="quizScreen" class="screen fade-in">
      <div class="card">
        <h2>Science Safety Quiz</h2>
        <div id="quizQ"></div>
        <div id="quizOptions"></div>
        <div id="quizFeedback" class="feedback"></div>
        <button id="quizNextBtn" onclick="nextQuizQuestion()" disabled>
          Next Question
        </button>
      </div>
    </div>

    <div id="equipmentScreen" class="screen fade-in">
      <div class="card">
        <h2>Lab Equipment</h2>
        <div id="equipmentList"></div>
        <button onclick="showEquipment()">Show Equipment</button>
      </div>
    </div>

    <div id="scenarioScreen" class="screen fade-in">
      <div class="card">
        <h2>Safety Scenarios</h2>
        <div id="scenarioText"></div>
        <div class="scenario-image" id="scenarioImage">Scenario Image</div>
        <div id="scenarioOptions"></div>
        <div id="scenarioFeedback" class="feedback"></div>
        <button id="scenarioNextBtn" onclick="nextScenario()" disabled>
          Next Scenario
        </button>
      </div>
    </div>

    <div id="rulesScreen" class="screen fade-in">
      <div class="card">
        <h2>Science Safety Rules</h2>
        <div class="scientist-container">
          <div class="scientist-box-text">
            <table class="safety-table">
              <tbody id="rulesList"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div id="emergencyScreen" class="screen fade-in">
      <div class="card">
        <h2>Emergency Procedures</h2>
        <div id="emergencyQuestion"></div>
        <div id="emergencyOptions"></div>
        <div id="emergencyFeedback" class="feedback"></div>
        <button id="emergencyNextBtn" onclick="nextEmergency()" disabled>
          Next Situation
        </button>
      </div>
    </div>

    <div id="whsScreen" class="screen fade-in">
      <div class="card">
        <h2>Hazard Symbols</h2>
        <div id="symbolImage" class="scenario-image">Hazard Symbol</div>
        <div id="symbolOptions"></div>
        <div id="symbolFeedback" class="feedback"></div>
        <button id="symbolNextBtn" onclick="nextSymbol()" disabled>
          Next Symbol
        </button>
      </div>
    </div>

    <!-- Chemical Mixing Game -->
    <div id="chemicalScreen" class="screen fade-in">
      <div class="card">
        <h2>Chemical Mixing Safety</h2>
        <div class="chemical-game">
          <p>Select two chemicals to mix and see what happens!</p>
          <div class="chemicals-container">
            <div
              class="chemical-item"
              style="background-color: #ff9999"
              onclick="selectChemical('acid')"
            >
              üß™<br />Acid
            </div>
            <div
              class="chemical-item"
              style="background-color: #9999ff"
              onclick="selectChemical('base')"
            >
              üß™<br />Base
            </div>
            <div
              class="chemical-item"
              style="background-color: #ffff99"
              onclick="selectChemical('oxidizer')"
            >
              üß™<br />Oxidizer
            </div>
            <div
              class="chemical-item"
              style="background-color: #99ff99"
              onclick="selectChemical('water')"
            >
              üíß<br />Water
            </div>
          </div>

          <div class="mixing-area" id="mixingArea">
            Drag chemicals here to mix
          </div>

          <div class="reaction-result" id="reactionResult">
            Reaction result will appear here
          </div>

          <div class="chemical-warning">
            ‚ö†Ô∏è Never mix chemicals without proper knowledge and safety
            equipment!
          </div>

          <button onclick="resetMixing()">Reset Experiment</button>
        </div>
      </div>
    </div>

    <!-- üîä Sound Effects -->
    <audio id="correctSound" src="correct-6033 - Copy.mp3"></audio>
    <audio id="wrongSound" src="wrong-47985 - Copy.mp3"></audio>
    <audio id="explosionSound" src="explosion-40585.mp3"></audio>
    <audio id="fizzSound" src="fizz-91102.mp3"></audio>

    <script>
      // Global variables to track if an answer has been selected
      let quizAnswered = false;
      let scenarioAnswered = false;
      let emergencyAnswered = false;
      let symbolAnswered = false;

      // Chemical mixing game variables
      let selectedChemicals = [];
      const chemicalReactions = {
        "acid-base": {
          result: "Neutralization reaction! Salt and water are formed.",
          safe: true,
          effect: "fizz",
        },
        "acid-oxidizer": {
          result: "Dangerous reaction! Could produce toxic gases.",
          safe: false,
          effect: "danger",
        },
        "acid-water": {
          result:
            "Always add acid to water, not water to acid! This is safe if done correctly.",
          safe: true,
          effect: "safe",
        },
        "base-oxidizer": {
          result:
            "Potentially dangerous reaction! Could produce heat and splattering.",
          safe: false,
          effect: "danger",
        },
        "base-water": {
          result:
            "Dissolution reaction. Some bases dissolve exothermically in water.",
          safe: true,
          effect: "safe",
        },
        "oxidizer-water": {
          result:
            "Generally safe, but some oxidizers react violently with water!",
          safe: false,
          effect: "danger",
        },
        same: {
          result: "Mixing the same chemicals just gives you more of the same.",
          safe: true,
          effect: "safe",
        },
      };

      function showScreen(id) {
        document
          .querySelectorAll(".screen")
          .forEach((s) => s.classList.remove("active"));
        document.getElementById(id).classList.add("active");

        // Reset answer tracking when switching screens
        quizAnswered = false;
        scenarioAnswered = false;
        emergencyAnswered = false;
        symbolAnswered = false;

        // Update next button states
        document.getElementById("quizNextBtn").disabled = true;
        document.getElementById("scenarioNextBtn").disabled = true;
        document.getElementById("emergencyNextBtn").disabled = true;
        document.getElementById("symbolNextBtn").disabled = true;

        // Initialize the screen if needed
        if (id === "quizScreen") showQuizQuestion();
        else if (id === "equipmentScreen") showEquipment();
        else if (id === "scenarioScreen") showScenario();
        else if (id === "rulesScreen") showRules();
        else if (id === "emergencyScreen") showEmergency();
        else if (id === "matchingScreen") showMatching();
        else if (id === "whsScreen") showSymbol();
        else if (id === "chemicalScreen") resetMixing();
      }

      // Science Safety Quiz
      const quizQuestions = [
        {
          question: "What should you wear to protect your eyes in the lab?",
          options: [
            "üòé Sunglasses",
            "ü•Ω Safety goggles",
            "üëì Regular glasses",
            "üö´ Nothing",
          ],
          answer: 1,
        },
        {
          question: "What should you do if you break glassware?",
          options: [
            "üö´ Hide it",
            "üó£Ô∏è Tell the teacher immediately",
            "üß§ Sweep it with your hands",
            "üö´ Ignore it",
          ],
          answer: 1,
        },
        {
          question: "When should you wear gloves in the lab?",
          options: [
            "üî• Only when handling hot materials",
            "üßë‚Äçüî¨ Only when handling chemicals",
            "üßë‚Äçüî¨ Whenever handling materials",
            "üö´ Never",
          ],
          answer: 2,
        },
        {
          question: "What should you do with long hair during experiments?",
          options: [
            "üë©‚Äçü¶∞ Leave it down",
            "ü™¢ Tie it back",
            "üëí Wear a hat",
            "‚úÇÔ∏è Cut it short",
          ],
          answer: 1,
        },
        {
          question: "How should you smell a chemical?",
          options: [
            "üëÉ Directly from the container",
            "üëÉ By wafting the fumes toward you",
            "üëÉ With your face close to the container",
            "üö´ You should never smell chemicals",
          ],
          answer: 1,
        },
      ];

      let quizIndex = 0;

      function showQuizQuestion() {
        const question = quizQuestions[quizIndex];
        document.getElementById("quizQ").textContent = question.question;

        let optionsHTML = "";
        question.options.forEach((option, index) => {
          optionsHTML += `<div class="equipment-item" onclick="checkQuizAnswer(${index})">
            <div class="equipment-icon">${index + 1}</div>
            <div>${option}</div>
          </div>`;
        });

        document.getElementById("quizOptions").innerHTML = optionsHTML;
        document.getElementById("quizFeedback").textContent = "";
        document.getElementById("quizFeedback").className = "feedback";

        // Reset answer tracking
        quizAnswered = false;
        document.getElementById("quizNextBtn").disabled = true;
      }

      function checkQuizAnswer(selectedIndex) {
        const correctIndex = quizQuestions[quizIndex].answer;
        const correctSound = document.getElementById("correctSound");
        const wrongSound = document.getElementById("wrongSound");

        if (selectedIndex === correctIndex) {
          document.getElementById("quizFeedback").textContent =
            "‚úÖ Correct! Good job!";
          document.getElementById("quizFeedback").className =
            "feedback correct";
          correctSound.play();
        } else {
          document.getElementById("quizFeedback").textContent =
            "‚ùå Incorrect. The right answer is: " +
            quizQuestions[quizIndex].options[correctIndex];
          document.getElementById("quizFeedback").className =
            "feedback incorrect";
          wrongSound.play();
        }

        // Enable the next button
        quizAnswered = true;
        document.getElementById("quizNextBtn").disabled = false;
      }

      function nextQuizQuestion() {
        quizIndex = (quizIndex + 1) % quizQuestions.length;
        showQuizQuestion();
      }

      // Lab Equipment
      const equipment = [
        { name: "Safety Goggles", icon: "üëì", purpose: "Eye protection" },
        { name: "Lab Coat", icon: "ü•º", purpose: "Protect skin and clothing" },
        { name: "Gloves", icon: "üß§", purpose: "Hand protection" },
        { name: "Beaker", icon: "üß™", purpose: "Mixing and heating liquids" },
        {
          name: "Test Tube",
          icon: "‚öóÔ∏è",
          purpose: "distill, or separate and purify, substances",
        },
        { name: "Bunsen Burner", icon: "üî•", purpose: "Heating substances" },
        { name: "Microscope", icon: "üî¨", purpose: "Viewing small objects" },
        {
          name: "Safety Shower",
          icon: "üöø",
          purpose: "Emergency chemical rinse",
        },
        { name: "Fire Extinguisher", icon: "üßØ", purpose: "Put out fires" },
      ];

      function showEquipment() {
        let equipmentHTML = "";
        equipment.forEach((item) => {
          equipmentHTML += `<div class="equipment-item">
            <div class="equipment-icon">${item.icon}</div>
            <div><strong>${item.name}</strong>: ${item.purpose}</div>
          </div>`;
        });

        document.getElementById("equipmentList").innerHTML = equipmentHTML;
      }

      // Safety Scenarios
      const scenarios = [
        {
          scenario:
            "You accidentally spill a small amount of chemical on your hand. What should you do?",
          options: [
            "Wipe it on your lab coat",
            "Rinse with water for 15 minutes",
            "Ignore it",
            "Ask a friend for help",
          ],
          answer: 1,
          imageText: "Chemical Spill",
        },
        {
          scenario:
            "A beaker of water is boiling on a hot plate and starts to bubble over. What should you do?",
          options: [
            "Turn off the hot plate",
            "Move the beaker with your hands",
            "Add cold water to cool it",
            "Yell for help",
          ],
          answer: 0,
          imageText: "Boiling Over",
        },
        {
          scenario:
            "You notice a small fire in a trash can. What should you do first?",
          options: [
            "Throw water on it",
            "Use a fire extinguisher",
            "Tell the teacher immediately",
            "Evacuate the room",
          ],
          answer: 2,
          imageText: "Fire Emergency",
        },
      ];

      let scenarioIndex = 0;

      function showScenario() {
        const scenario = scenarios[scenarioIndex];
        document.getElementById("scenarioText").textContent = scenario.scenario;
        document.getElementById("scenarioImage").textContent =
          scenario.imageText;

        let optionsHTML = "";
        scenario.options.forEach((option, index) => {
          optionsHTML += `<div class="equipment-item" onclick="checkScenarioAnswer(${index})">
            <div class="equipment-icon">${index + 1}</div>
            <div>${option}</div>
          </div>`;
        });

        document.getElementById("scenarioOptions").innerHTML = optionsHTML;
        document.getElementById("scenarioFeedback").textContent = "";
        document.getElementById("scenarioFeedback").className = "feedback";

        // Reset answer tracking
        scenarioAnswered = false;
        document.getElementById("scenarioNextBtn").disabled = true;
      }

      function checkScenarioAnswer(selectedIndex) {
        const correctIndex = scenarios[scenarioIndex].answer;
        const correctSound = document.getElementById("correctSound");
        const wrongSound = document.getElementById("wrongSound");

        if (selectedIndex === correctIndex) {
          document.getElementById("scenarioFeedback").textContent =
            "‚úÖ Correct! That's the safe choice.";
          document.getElementById("scenarioFeedback").className =
            "feedback correct";
          correctSound.play();
        } else {
          document.getElementById("scenarioFeedback").textContent =
            "‚ùå Incorrect. The right answer is: " +
            scenarios[scenarioIndex].options[correctIndex];
          document.getElementById("scenarioFeedback").className =
            "feedback incorrect";
          wrongSound.play();
        }

        // Enable the next button
        scenarioAnswered = true;
        document.getElementById("scenarioNextBtn").disabled = false;
      }

      function nextScenario() {
        scenarioIndex = (scenarioIndex + 1) % scenarios.length;
        showScenario();
      }

      // Safety Rules
      const safetyRules = [
        "Always wear safety goggles",
        "Tie back long hair",
        "No eating or drinking in lab",
        "Know emergency procedures",
        "Report accidents immediately",
        "Wear appropriate clothing",
        "Never work alone",
        "Label all containers",
        "Dispose of waste properly",
      ];

      function showRules() {
        let rulesHTML = "";
        safetyRules.forEach((rule, index) => {
          rulesHTML += `<tr><td>${index + 1}.</td><td>${rule}</td></tr>`;
        });

        document.getElementById("rulesList").innerHTML = rulesHTML;
      }

      // Emergency Procedures
      const emergencies = [
        {
          question: "What should you do if chemicals get in your eyes?",
          options: [
            "ü§¶ Rub your eyes",
            "üí¶ Use the eyewash station",
            "üëÄ Blink repeatedly",
            "‚è≥ Wait to see if it stings",
          ],
          answer: 1,
        },
        {
          question: "If your clothing catches fire, what should you do?",
          options: [
            "üèÉ‚Äç‚ôÇÔ∏è Run for help",
            "üî• Stop, drop, and roll",
            "üëï Take off your clothes",
            "üí¶ Pour water on yourself",
          ],
          answer: 1,
        },
        {
          question: "What should you do if you cut yourself with glass?",
          options: [
            "üë©üèª‚Äçüíª Continue working",
            "üó£Ô∏è Tell the teacher and get first aid",
            "üïµÔ∏è‚Äç‚ôÄÔ∏è Hide the evidence",
            "ü©π Use tape as a bandage",
          ],
          answer: 1,
        },
      ];

      let emergencyIndex = 0;

      function showEmergency() {
        const emergency = emergencies[emergencyIndex];
        document.getElementById("emergencyQuestion").textContent =
          emergency.question;

        let optionsHTML = "";
        emergency.options.forEach((option, index) => {
          optionsHTML += `<div class="equipment-item" onclick="checkEmergencyAnswer(${index})">
            <div class="equipment-icon">${index + 1}</div>
            <div>${option}</div>
          </div>`;
        });

        document.getElementById("emergencyOptions").innerHTML = optionsHTML;
        document.getElementById("emergencyFeedback").textContent = "";
        document.getElementById("emergencyFeedback").className = "feedback";

        // Reset answer tracking
        emergencyAnswered = false;
        document.getElementById("emergencyNextBtn").disabled = true;
      }

      function checkEmergencyAnswer(selectedIndex) {
        const correctIndex = emergencies[emergencyIndex].answer;
        const correctSound = document.getElementById("correctSound");
        const wrongSound = document.getElementById("wrongSound");

        if (selectedIndex === correctIndex) {
          document.getElementById("emergencyFeedback").textContent =
            "‚úÖ Correct! This is the right emergency procedure.";
          document.getElementById("emergencyFeedback").className =
            "feedback correct";
          correctSound.play();
        } else {
          document.getElementById("emergencyFeedback").textContent =
            "‚ùå Incorrect. The right answer is: " +
            emergencies[emergencyIndex].options[correctIndex];
          document.getElementById("emergencyFeedback").className =
            "feedback incorrect";
          wrongSound.play();
        }

        // Enable the next button
        emergencyAnswered = true;
        document.getElementById("emergencyNextBtn").disabled = false;
      }

      function nextEmergency() {
        emergencyIndex = (emergencyIndex + 1) % emergencies.length;
        showEmergency();
      }

      // Safety Matching
      const matchingQuestions = [
        {
          question: "Match the symbol to its meaning:",
          options: ["Flammable", "Corrosive", "Toxic", "Explosive"],
          answers: ["üî• Flammable", "üíß Corrosive", "‚ò†Ô∏è Toxic", "üí• Explosive"],
        },
        {
          question: "Match the equipment to its use:",
          options: [
            "For eye protection",
            "For hand protection",
            "For emergency rinsing",
            "For putting out fires",
          ],
          answers: [
            "üëì Safety goggles",
            "üß§ Gloves",
            "üöø Safety shower",
            "üßØ Fire extinguisher",
          ],
        },
      ];

      let matchingIndex = 0;

      function showMatching() {
        const matching = matchingQuestions[matchingIndex];
        document.getElementById("matchingQuestion").textContent =
          matching.question;

        let optionsHTML = "";
        matching.answers.forEach((answer, index) => {
          optionsHTML += `<div class="equipment-item">
            <div class="equipment-icon">${index + 1}</div>
            <div>${answer}</div>
          </div>`;
        });

        document.getElementById("matchingOptions").innerHTML = optionsHTML;
        document.getElementById("matchingFeedback").textContent =
          "Match the items correctly!";
        document.getElementById("matchingFeedback").className = "feedback";

        // For matching, we'll enable the next button immediately since it's informational
        document.getElementById("matchingNextBtn").disabled = false;
      }

      function nextMatching() {
        matchingIndex = (matchingIndex + 1) % matchingQuestions.length;
        showMatching();
      }

      // Hazard Symbols
      const whsSymbols = [
        {
          symbol: "Flammable",
          options: [
            "Catches fire easily",
            "Poisonous if ingested",
            "Causes skin burns",
            "May explode if heated",
          ],
          answer: 0,
          imageText: "üî• Flammable",
        },
        {
          symbol: "Corrosive",
          options: [
            "Causes skin burns",
            "Catches fire easily",
            "Harmful to environment",
            "May explode if heated",
          ],
          answer: 0,
          imageText: "üíß Corrosive",
        },
        {
          symbol: "Toxic",
          options: [
            "Poisonous if ingested",
            "Causes skin irritation",
            "Radioactive",
            "Harmful to environment",
          ],
          answer: 0,
          imageText: "‚ò†Ô∏è Toxic",
        },
      ];

      let symbolIndex = 0;

      function showSymbol() {
        const symbol = whsSymbols[symbolIndex];
        document.getElementById("symbolImage").textContent = symbol.imageText;

        let optionsHTML = "";
        symbol.options.forEach((option, index) => {
          optionsHTML += `<div class="equipment-item" onclick="checkSymbolAnswer(${index})">
            <div class="equipment-icon">${index + 1}</div>
            <div>${option}</div>
          </div>`;
        });

        document.getElementById("symbolOptions").innerHTML = optionsHTML;
        document.getElementById("symbolFeedback").textContent = "";
        document.getElementById("symbolFeedback").className = "feedback";

        // Reset answer tracking
        symbolAnswered = false;
        document.getElementById("symbolNextBtn").disabled = true;
      }

      function checkSymbolAnswer(selectedIndex) {
        const correctIndex = whsSymbols[symbolIndex].answer;
        const correctSound = document.getElementById("correctSound");
        const wrongSound = document.getElementById("wrongSound");

        if (selectedIndex === correctIndex) {
          document.getElementById("symbolFeedback").textContent =
            "‚úÖ Correct! You know your hazard symbols.";
          document.getElementById("symbolFeedback").className =
            "feedback correct";
          correctSound.play();
        } else {
          document.getElementById("symbolFeedback").textContent =
            "‚ùå Incorrect. This symbol means: " +
            whsSymbols[symbolIndex].options[correctIndex];
          document.getElementById("symbolFeedback").className =
            "feedback incorrect";
          wrongSound.play();
        }

        // Enable the next button
        symbolAnswered = true;
        document.getElementById("symbolNextBtn").disabled = false;
      }

      function nextSymbol() {
        symbolIndex = (symbolIndex + 1) % whsSymbols.length;
        showSymbol();
      }

      // Chemical Mixing Game
      function selectChemical(chemical) {
        if (selectedChemicals.length < 2) {
          selectedChemicals.push(chemical);
          updateMixingArea();

          if (selectedChemicals.length === 2) {
            mixChemicals();
          }
        }
      }

      function updateMixingArea() {
        const mixingArea = document.getElementById("mixingArea");
        if (selectedChemicals.length === 0) {
          mixingArea.innerHTML = "Drag chemicals here to mix";
        } else {
          mixingArea.innerHTML = selectedChemicals
            .map((chem) => {
              switch (chem) {
                case "acid":
                  return "üß™ Acid";
                case "base":
                  return "üß™ Base";
                case "oxidizer":
                  return "üß™ Oxidizer";
                case "water":
                  return "üíß Water";
              }
            })
            .join(" + ");
        }
      }

      function mixChemicals() {
        const reactionResult = document.getElementById("reactionResult");
        const [chem1, chem2] = selectedChemicals;
        let reactionKey;

        if (chem1 === chem2) {
          reactionKey = "same";
        } else if (
          (chem1 === "acid" && chem2 === "base") ||
          (chem1 === "base" && chem2 === "acid")
        ) {
          reactionKey = "acid-base";
        } else if (
          (chem1 === "acid" && chem2 === "oxidizer") ||
          (chem1 === "oxidizer" && chem2 === "acid")
        ) {
          reactionKey = "acid-oxidizer";
        } else if (
          (chem1 === "acid" && chem2 === "water") ||
          (chem1 === "water" && chem2 === "acid")
        ) {
          reactionKey = "acid-water";
        } else if (
          (chem1 === "base" && chem2 === "oxidizer") ||
          (chem1 === "oxidizer" && chem2 === "base")
        ) {
          reactionKey = "base-oxidizer";
        } else if (
          (chem1 === "base" && chem2 === "water") ||
          (chem1 === "water" && chem2 === "base")
        ) {
          reactionKey = "base-water";
        } else if (
          (chem1 === "oxidizer" && chem2 === "water") ||
          (chem1 === "water" && chem2 === "oxidizer")
        ) {
          reactionKey = "oxidizer-water";
        }

        const reaction = chemicalReactions[reactionKey];

        // Play appropriate sound
        if (reaction.effect === "danger") {
          document.getElementById("explosionSound").play();
        } else if (reaction.effect === "fizz") {
          document.getElementById("fizzSound").play();
        } else {
          document.getElementById("correctSound").play();
        }

        // Display result with appropriate styling
        reactionResult.textContent = reaction.result;
        reactionResult.className = "reaction-result";

        if (reaction.safe) {
          reactionResult.classList.add("reaction-safe");
        } else {
          reactionResult.classList.add("reaction-danger");

          // Special case for particularly dangerous reactions
          if (
            reactionKey === "acid-oxidizer" ||
            reactionKey === "base-oxidizer"
          ) {
            reactionResult.classList.add("reaction-explosion");
          }
        }
      }

      function resetMixing() {
        selectedChemicals = [];
        updateMixingArea();
        document.getElementById("reactionResult").textContent =
          "Reaction result will appear here";
        document.getElementById("reactionResult").className = "reaction-result";
      }

      // Initialize the game
      window.onload = function () {
        setTimeout(() => {
          document.getElementById("loadingScreen").style.display = "none";
          showEquipment();
          showRules();
        }, 1500);
      };
    </script>
  </body>
</html>
